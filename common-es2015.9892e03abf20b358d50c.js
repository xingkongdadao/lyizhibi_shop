(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"0/6H":function(t,e,o){"use strict";o.d(e,"a",(function(){return r}));var n=o("A36C"),i=o("iWo5"),s=o("qULd");const r=(t,e)=>{let o,r;const a=(t,n,i)=>{if("undefined"==typeof document)return;const s=document.elementFromPoint(t,n);s&&e(s)?s!==o&&(l(),c(s,i)):l()},c=(t,e)=>{o=t,r||(r=o);const i=o;Object(n.f)(()=>i.classList.add("ion-activated")),e()},l=(t=!1)=>{if(!o)return;const e=o;Object(n.f)(()=>e.classList.remove("ion-activated")),t&&r!==o&&o.click(),o=void 0};return Object(i.createGesture)({el:t,gestureName:"buttonActiveDrag",threshold:0,onStart:t=>a(t.currentX,t.currentY,s.a),onMove:t=>a(t.currentX,t.currentY,s.b),onEnd:()=>{l(!0),Object(s.e)(),r=void 0}})}},"74mu":function(t,e,o){"use strict";o.d(e,"a",(function(){return i})),o.d(e,"b",(function(){return s})),o.d(e,"c",(function(){return n})),o.d(e,"d",(function(){return a}));const n=(t,e)=>null!==e.closest(t),i=(t,e)=>"string"==typeof t&&t.length>0?Object.assign({"ion-color":!0,["ion-color-"+t]:!0},e):e,s=t=>{const e={};return(t=>void 0!==t?(Array.isArray(t)?t:t.split(" ")).filter(t=>null!=t).map(t=>t.trim()).filter(t=>""!==t):[])(t).forEach(t=>e[t]=!0),e},r=/^[a-z][a-z0-9+\-.]*:/,a=async(t,e,o,n)=>{if(null!=t&&"#"!==t[0]&&!r.test(t)){const i=document.querySelector("ion-router");if(i)return null!=e&&e.preventDefault(),i.push(t,o,n)}return!1}},LLYR:function(t,e,o){"use strict";o.d(e,"a",(function(){return p}));var n=o("3Pt+"),i=o("fXoL"),s=o("TEn/"),r=o("1jKG"),a=o("ofXK"),c=o("sYmb");function l(t,e){if(1&t&&(i.Lb(0,"ion-select-option",12),i.dc(1),i.Kb()),2&t){const t=e.$implicit;i.Yb("value",t.id),i.yb(1),i.gc(" ",t.name,"(",t.name_vn,") ")}}function d(t,e){if(1&t&&(i.Lb(0,"ion-select-option",12),i.dc(1),i.Kb()),2&t){const t=e.$implicit;i.Yb("value",t.id),i.yb(1),i.fc(" ",t.name," ")}}function h(t,e){if(1&t&&(i.Lb(0,"ion-select-option",12),i.dc(1),i.Kb()),2&t){const t=e.$implicit;i.Yb("value",t.id),i.yb(1),i.fc(" ",t.name," ")}}let p=(()=>{class t{constructor(t,e,o){this.modalController=t,this.shopService=e,this.fb=o,this.canAdd=!0,this.pageSize=1e4,this.pageIndex=1}ngOnInit(){this.initForm()}initForm(){this.formGroup=this.fb.group({name:["",n.j.required],name_vn:[""],code:[""],brief:[""],shop_area:[],shop_category:[],country:[],has_entity:[!0],latitude:[],longitude:[]})}onSubmit(){this.canAdd=!this.canAdd,this.canAdd=!1;const t=new FormData;t.append("name",this.formGroup.get("name").value),t.append("name_vn",this.formGroup.get("name").value),t.append("brief",this.formGroup.get("brief").value),t.append("has_entity",this.formGroup.get("has_entity").value),t.append("url_google","http://maps.google.com/maps?z=18&q="+this.selectedMarker.getLngLat().lat+","+this.selectedMarker.getLngLat().lng),t.append("latitude",this.selectedMarker.getLngLat().lat.toFixed(6)),t.append("longitude",this.selectedMarker.getLngLat().lng.toFixed(6)),t.append("code","0"),this.formGroup.get("shop_category").value&&t.append("shop_category",this.formGroup.get("shop_category").value),this.formGroup.get("shop_area").value&&t.append("shop_area",this.formGroup.get("shop_area").value),this.formGroup.get("country").value&&t.append("country",this.formGroup.get("country").value),this.shopService.addShop(t).subscribe(t=>{this.selectedMarker.remove(),this.backData(t)})}backData(t){this.modalController.dismiss({dismissed:!0,shop:t}).then()}dismiss(){this.modalController.dismiss({dismissed:!0}).then()}}return t.\u0275fac=function(e){return new(e||t)(i.Ib(s.B),i.Ib(r.a),i.Ib(n.a))},t.\u0275cmp=i.Cb({type:t,selectors:[["app-shop-add"]],inputs:{shopAreaList:"shopAreaList",shopCategoryList:"shopCategoryList",countryList:"countryList",selectedMarker:"selectedMarker"},decls:46,vars:32,consts:[[3,"click"],[3,"formGroup","ngSubmit"],[1,"login-username"],["position","floating"],["type","text","formControlName","name"],["type","text","formControlName","brief"],["formControlName","shop_category","interface","action-sheet"],[3,"value",4,"ngFor","ngForOf"],["formControlName","shop_area","interface","action-sheet"],["formControlName","country","interface","action-sheet"],["slot","end","formControlName","has_entity","value","true"],["expand","block","type","submit",3,"disabled"],[3,"value"]],template:function(t,e){1&t&&(i.Lb(0,"ion-header"),i.Lb(1,"ion-toolbar"),i.Lb(2,"ion-title"),i.dc(3),i.Ub(4,"translate"),i.Kb(),i.Lb(5,"ion-button",0),i.Sb("click",(function(){return e.dismiss()})),i.dc(6),i.Ub(7,"translate"),i.Kb(),i.Kb(),i.Kb(),i.Lb(8,"ion-content"),i.Lb(9,"form",1),i.Sb("ngSubmit",(function(){return e.onSubmit()})),i.Lb(10,"ion-item",2),i.Lb(11,"ion-label",3),i.dc(12),i.Ub(13,"translate"),i.Kb(),i.Jb(14,"ion-input",4),i.Kb(),i.Lb(15,"ion-item",2),i.Lb(16,"ion-label",3),i.dc(17),i.Ub(18,"translate"),i.Kb(),i.Jb(19,"ion-input",5),i.Kb(),i.Lb(20,"ion-item"),i.Lb(21,"ion-label",3),i.dc(22),i.Ub(23,"translate"),i.Kb(),i.Lb(24,"ion-select",6),i.cc(25,l,2,3,"ion-select-option",7),i.Kb(),i.Kb(),i.Lb(26,"ion-item"),i.Lb(27,"ion-label",3),i.dc(28),i.Ub(29,"translate"),i.Kb(),i.Lb(30,"ion-select",8),i.cc(31,d,2,2,"ion-select-option",7),i.Kb(),i.Kb(),i.Lb(32,"ion-item"),i.Lb(33,"ion-label",3),i.dc(34),i.Ub(35,"translate"),i.Kb(),i.Lb(36,"ion-select",9),i.cc(37,h,2,2,"ion-select-option",7),i.Kb(),i.Kb(),i.Lb(38,"ion-item"),i.Lb(39,"ion-label"),i.dc(40),i.Ub(41,"translate"),i.Kb(),i.Jb(42,"ion-toggle",10),i.Kb(),i.Lb(43,"ion-button",11),i.dc(44),i.Ub(45,"translate"),i.Kb(),i.Kb(),i.Kb()),2&t&&(i.yb(3),i.ec(i.Vb(4,14,"shop_add.add_shop")),i.yb(3),i.ec(i.Vb(7,16,"shop_add.close")),i.yb(3),i.Yb("formGroup",e.formGroup),i.yb(3),i.ec(i.Vb(13,18,"shop_add.name_of_shop")),i.yb(5),i.ec(i.Vb(18,20,"shop_add.short_brief")),i.yb(5),i.ec(i.Vb(23,22,"shop_add.category_of_shop")),i.yb(3),i.Yb("ngForOf",e.shopCategoryList),i.yb(3),i.ec(i.Vb(29,24,"shop_add.area_of_shop")),i.yb(3),i.Yb("ngForOf",e.shopAreaList),i.yb(3),i.ec(i.Vb(35,26,"shop_add.country_of_shop")),i.yb(3),i.Yb("ngForOf",e.countryList),i.yb(3),i.ec(i.Vb(41,28,"shop_add.entity_shop")),i.yb(3),i.Yb("disabled",!e.canAdd),i.yb(1),i.ec(i.Vb(45,30,"shop_add.add")))},directives:[s.h,s.y,s.w,s.c,s.f,n.k,n.h,n.c,s.k,s.l,s.j,s.F,n.g,n.b,s.r,s.E,a.i,s.x,s.a,s.s],pipes:[c.c],styles:[""]}),t})()},"N+9X":function(t,e,o){"use strict";o.r(e),o.d(e,"MapPageModule",(function(){return y}));var n=o("tyNb"),i=o("mrSG"),s=o("4ZJM"),r=o("AytR"),a=o("LLYR"),c=o("fXoL"),l=o("1jKG"),d=o("njxG"),h=o("WC10"),p=o("T61A"),b=o("TEn/"),u=o("sYmb");const g=[{path:"",component:(()=>{class t{constructor(t,e,o,n,i){this.shopService=t,this.shopCategoryListService$=e,this.shopAreaListService$=o,this.countryService=n,this.modalController=i,this.shopMarkers=[],this.pageSize=1e4,this.pageIndex=1,this.hidden=!0,this.locationMarker=new s.Marker({draggable:!0,color:"blue"}),this.selectedMarker=new s.Marker({draggable:!0,color:"red"}),this.streetsMapStyle="mapbox://styles/mapbox/streets-v11",this.satelliteMapStyle="mapbox://styles/mapbox/satellite-v9",this.lightMapStyle="mapbox://styles/mapbox/light-v10",this.darkMapStyle="mapbox://styles/mapbox/dark-v10",this.outdoorsMapStyle="mapbox://styles/mapbox/outdoors-v11"}ngOnInit(){s.accessToken=r.a.mapboxKey,this.shopService.getShopList(this.pageIndex,this.pageSize).subscribe(t=>{this.shopsIncludeCategory=t.results,this.hidden=!1,this.initMapBox(),this.mapClick(),this.getUserLocation(),this.length=t.count,this.markerAllShopLocation(this.shopsIncludeCategory)}),this.shopCategoryListService$.getShopCategoryList().subscribe(t=>{this.shopCategoryList=t.results}),this.shopAreaListService$.getShopAreaList().subscribe(t=>{this.shopAreaList=t.results}),this.countryService.getCountryList().subscribe(t=>{this.countrylist=t.results})}initMapBox(){this.map=new s.Map({container:"mapa-mapbox",style:this.streetsMapStyle,center:[104.9001643,11.5447752],bearing:0,zoom:11})}mapClick(){this.map.on("click",t=>{this.selectedMarker.remove(),this.selectedMarker.setLngLat(t.lngLat).addTo(this.map),this.presentModal().then()})}markerAllShopLocation(t){for(const e of t)this.creatMarkerByShop(e)}creatMarkerByShop(t){const e=document.createElement("div");e.className="marker1",e.style.width="18px",e.style.height="18px",e.style.borderRadius="9px",e.style.backgroundColor=t.shop_category.color,e.style.backgroundImage="circle-15.svg",e.align="center";const o=new s.Popup({offset:25}).setText(t.name+t.code),n=new s.Marker({element:e,draggable:!1,color:"blue"}).setLngLat([t.longitude,t.latitude]).setPopup(o).addTo(this.map);this.shopMarkers.push(n),e.addEventListener("click",()=>{})}switchLayer(t){this.map.setStyle(t),console.log(t)}getUserLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{this.locationMarker.setLngLat([t.coords.longitude,t.coords.latitude]),this.creatUserLocationMarker()}):alert("\u7528\u6237\u4e0d\u5141\u8bb8\u83b7\u53d6\u624b\u673a\u5b9a\u4f4d")}creatUserLocationMarker(){this.locationMarker.addTo(this.map),this.map.setCenter([this.locationMarker.getLngLat().lng,this.locationMarker.getLngLat().lat]),this.timer=setInterval(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(t=>{this.locationMarker.remove(),this.locationMarker.setLngLat([t.coords.longitude,t.coords.latitude]).addTo(this.map)})},1e3)}ngOnDestroy(){this.timer&&clearInterval(this.timer)}resetBearing(){this.map.setBearing(0)}resetLocation(){this.map.setCenter([this.locationMarker.getLngLat().lng,this.locationMarker.getLngLat().lat])}presentModal(){return Object(i.a)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:a.a,cssClass:"my-custom-class",componentProps:{shopCategoryList:this.shopCategoryList,shopAreaList:this.shopAreaList,countryList:this.countrylist,selectedMarker:this.selectedMarker}});yield t.present();const e=yield t.onDidDismiss();e.data.shop&&this.shopService.getShopList(1,1,"","",e.data.shop.code).subscribe(t=>{this.shopAdd=t.results[0],this.creatMarkerByShop(this.shopAdd)})}))}refreshShop(){this.selectedMarker.remove(),this.shopService.getShopList(this.pageIndex,this.pageSize).subscribe(t=>{this.removeShopMarker(),this.shopsIncludeCategory=t.results,this.hidden=!1;for(const e of this.shopsIncludeCategory)this.creatMarkerByShop(e)})}removeShopMarker(){this.shopMarkers.forEach(t=>t.remove()),this.shopMarkers=[]}}return t.\u0275fac=function(e){return new(e||t)(c.Ib(l.a),c.Ib(d.a),c.Ib(h.a),c.Ib(p.a),c.Ib(b.B))},t.\u0275cmp=c.Cb({type:t,selectors:[["app-map"]],decls:35,vars:12,consts:[["slot","start"],["autoHide","false","color","danger"],["id","mapa-mapbox"],["id","menu",3,"hidden"],["id","streets-v11","type","radio","name","rtoggle","value","streets","checked","checked",3,"change"],["for","streets-v11"],["id","light-v10","type","radio","name","rtoggle","value","light",3,"change"],["for","light-v10"],["id","dark-v10","type","radio","name","rtoggle","value","dark",3,"change"],["for","dark-v10"],["id","outdoors-v11","type","radio","name","rtoggle","value","outdoors",3,"change"],["for","outdoors-v11"],["id","satellite-v9","type","radio","name","rtoggle","value","satellite",3,"change"],["for","satellite-v9"],["id","bearing",3,"hidden"],[3,"click"],["id","location",3,"hidden"],["name","compass"]],template:function(t,e){1&t&&(c.Lb(0,"ion-header"),c.Lb(1,"ion-toolbar"),c.Lb(2,"ion-buttons",0),c.Jb(3,"ion-menu-button",1),c.Kb(),c.Lb(4,"ion-title"),c.dc(5),c.Ub(6,"translate"),c.Kb(),c.Kb(),c.Kb(),c.Lb(7,"ion-content"),c.Jb(8,"div",2),c.Lb(9,"div",3),c.Lb(10,"input",4),c.Sb("change",(function(){return e.switchLayer(e.streetsMapStyle)})),c.Kb(),c.Lb(11,"label",5),c.dc(12,"streets"),c.Kb(),c.Lb(13,"input",6),c.Sb("change",(function(){return e.switchLayer(e.lightMapStyle)})),c.Kb(),c.Lb(14,"label",7),c.dc(15,"light"),c.Kb(),c.Lb(16,"input",8),c.Sb("change",(function(){return e.switchLayer(e.darkMapStyle)})),c.Kb(),c.Lb(17,"label",9),c.dc(18,"dark"),c.Kb(),c.Lb(19,"input",10),c.Sb("change",(function(){return e.switchLayer(e.outdoorsMapStyle)})),c.Kb(),c.Lb(20,"label",11),c.dc(21,"outdoors"),c.Kb(),c.Lb(22,"input",12),c.Sb("change",(function(){return e.switchLayer(e.satelliteMapStyle)})),c.Kb(),c.Lb(23,"label",13),c.dc(24,"satellite"),c.Kb(),c.Kb(),c.Lb(25,"div",14),c.Lb(26,"ion-fab-button",15),c.Sb("click",(function(){return e.resetBearing()})),c.dc(27),c.Ub(28,"translate"),c.Kb(),c.Kb(),c.Lb(29,"div",16),c.Lb(30,"ion-fab-button",15),c.Sb("click",(function(){return e.resetLocation()})),c.Jb(31,"ion-icon",17),c.Kb(),c.Lb(32,"ion-button",15),c.Sb("click",(function(){return e.refreshShop()})),c.dc(33),c.Ub(34,"translate"),c.Kb(),c.Kb(),c.Kb()),2&t&&(c.yb(5),c.ec(c.Vb(6,6,"map_add.add_shop")),c.yb(4),c.Yb("hidden",e.hidden),c.yb(16),c.Yb("hidden",e.hidden),c.yb(2),c.ec(c.Vb(28,8,"map_add.north")),c.yb(2),c.Yb("hidden",e.hidden),c.yb(4),c.ec(c.Vb(34,10,"map_add.refresh")))},directives:[b.h,b.y,b.d,b.o,b.w,b.f,b.g,b.i,b.c],pipes:[u.c],styles:["#mapa-mapbox[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;width:100%;height:100%}#menu[_ngcontent-%COMP%]{background:#fff;padding:10px;font-family:Open Sans,sans-serif}#bearing[_ngcontent-%COMP%], #menu[_ngcontent-%COMP%]{position:absolute}#bearing[_ngcontent-%COMP%]{margin-top:300px}#location[_ngcontent-%COMP%]{position:absolute;margin-top:400px}.my-custom-class[_ngcontent-%COMP%]{--background:#222}"]}),t})()}];let m=(()=>{class t{}return t.\u0275mod=c.Gb({type:t}),t.\u0275inj=c.Fb({factory:function(e){return new(e||t)},imports:[[n.i.forChild(g)],n.i]}),t})();var f=o("kCW2");let y=(()=>{class t{}return t.\u0275mod=c.Gb({type:t}),t.\u0275inj=c.Fb({factory:function(e){return new(e||t)},imports:[[f.a,m]]}),t})()},ZaV5:function(t,e,o){"use strict";o.d(e,"a",(function(){return n})),o.d(e,"b",(function(){return i}));const n=async(t,e,o,n,i)=>{if(t)return t.attachViewToDom(e,o,i,n);if("string"!=typeof o&&!(o instanceof HTMLElement))throw new Error("framework delegate is missing");const s="string"==typeof o?e.ownerDocument&&e.ownerDocument.createElement(o):o;return n&&n.forEach(t=>s.classList.add(t)),i&&Object.assign(s,i),e.appendChild(s),s.componentOnReady&&await s.componentOnReady(),s},i=(t,e)=>{if(e){if(t)return t.removeViewFromDom(e.parentElement,e);e.remove()}return Promise.resolve()}},h3R7:function(t,e,o){"use strict";o.d(e,"a",(function(){return n}));const n={bubbles:{dur:1e3,circles:9,fn:(t,e,o)=>{const n=t*e/o-t+"ms",i=2*Math.PI*e/o;return{r:5,style:{top:9*Math.sin(i)+"px",left:9*Math.cos(i)+"px","animation-delay":n}}}},circles:{dur:1e3,circles:8,fn:(t,e,o)=>{const n=e/o,i=t*n-t+"ms",s=2*Math.PI*n;return{r:5,style:{top:9*Math.sin(s)+"px",left:9*Math.cos(s)+"px","animation-delay":i}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:()=>({r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}})},crescent:{dur:750,circles:1,fn:()=>({r:26,style:{}})},dots:{dur:750,circles:3,fn:(t,e)=>({r:6,style:{left:9-9*e+"px","animation-delay":-110*e+"ms"}})},lines:{dur:1e3,lines:12,fn:(t,e,o)=>({y1:17,y2:29,style:{transform:`rotate(${30*e+(e<6?180:-180)}deg)`,"animation-delay":t*e/o-t+"ms"}})},"lines-small":{dur:1e3,lines:12,fn:(t,e,o)=>({y1:12,y2:20,style:{transform:`rotate(${30*e+(e<6?180:-180)}deg)`,"animation-delay":t*e/o-t+"ms"}})}}},qULd:function(t,e,o){"use strict";o.d(e,"a",(function(){return s})),o.d(e,"b",(function(){return r})),o.d(e,"c",(function(){return i})),o.d(e,"d",(function(){return c})),o.d(e,"e",(function(){return a}));const n={getEngine(){const t=window;return t.TapticEngine||t.Capacitor&&t.Capacitor.isPluginAvailable("Haptics")&&t.Capacitor.Plugins.Haptics},available(){return!!this.getEngine()},isCordova:()=>!!window.TapticEngine,isCapacitor:()=>!!window.Capacitor,impact(t){const e=this.getEngine();if(!e)return;const o=this.isCapacitor()?t.style.toUpperCase():t.style;e.impact({style:o})},notification(t){const e=this.getEngine();if(!e)return;const o=this.isCapacitor()?t.style.toUpperCase():t.style;e.notification({style:o})},selection(){this.impact({style:"light"})},selectionStart(){const t=this.getEngine();t&&(this.isCapacitor()?t.selectionStart():t.gestureSelectionStart())},selectionChanged(){const t=this.getEngine();t&&(this.isCapacitor()?t.selectionChanged():t.gestureSelectionChanged())},selectionEnd(){const t=this.getEngine();t&&(this.isCapacitor()?t.selectionEnd():t.gestureSelectionEnd())}},i=()=>{n.selection()},s=()=>{n.selectionStart()},r=()=>{n.selectionChanged()},a=()=>{n.selectionEnd()},c=t=>{n.impact(t)}}}]);